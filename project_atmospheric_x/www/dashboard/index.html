<!DOCTYPE html>
<html>
    <head>
        <title>AtmosphericX - Dashboard</title>
        <meta name="viewport" content="width=device-width initial-scale=0.5, maximum-scale=0.5, user-scalable=no minimal-ui">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
        <link rel="stylesheet" href="../assets/styles/dashboard.css">
        <link rel="stylesheet" href="../assets/styles/responsive-dashboard.css">
        <link rel="icon" href="/assets/media/dashboard/favicon.ico" type="image/x-icon">
        <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/4.1.1/crypto-js.min.js"></script>
        <script src="../assets/javascript/LibraryClass.js"></script>
        <script src="../assets/javascript/DashboardClass.js"></script>
        <script src="../assets/javascript/AlertsClass.js"></script>
    </head>
    <body id="_body.base">
        <i class="hamburger-menu fa fa-bars" onclick="dashboard_class.TriggerHamburgerListener()"></i>
        <div class="interactive-sidebar" data-state="closed">
            <h1 class="sidebar-title">AtmosphericX</h1>
            <img src="/assets/media/dashboard/logo.png" alt="Logo" class="sidebar-logo">
            <hr class="sidebar-hr">
            <div class="sidebar-item" onclick="dashboard_class.NavigationListener('_navigation.home')">
                <i class="fas fa-house-user"></i>
                <span>Dashboard</span>
            </div>
            <div class="sidebar-item" onclick="dashboard_class.NavigationListener('_navigation.alerts')">
                <i class="fas fa-exclamation-triangle"></i>
                <span>Active Alerts</span>
            </div>
            <div class="sidebar-item" onclick="dashboard_class.NavigationListener('_navigation.lsr')">
                <i class="fas fa-flag"></i>
                <span>Reports Index</span>
            </div>
            <div class="sidebar-item" onclick="dashboard_class.NavigationListener('_navigation.lightning')">
                <i class="fas fa-bolt"></i>
                <span>Lightning Index</span>
            </div>
            <div class="sidebar-item" onclick="dashboard_class.NavigationListener('_navigation.dicussions')">
                <i class="fas fa-cloud-sun"></i>
                <span>Discussions</span>
            </div>
            <div class="sidebar-item" onclick="dashboard_class.NavigationListener('_navigation.nwws')">
                <i class="fas fa-comments"></i>
                <span>NWWS-OI</span>
            </div>
            <div class="sidebar-item" onclick="dashboard_class.NavigationListener('_navigation.spc')">
                <i class="fas fa-project-diagram"></i>
                <span>SPC Models</span>
            </div>
            <div class="sidebar-item" onclick="dashboard_class.NavigationListener('_navigation.mapbox')">
                <i class="fas fa-map"></i>
                <span>Mapbox Widget</span>
            </div>
            <div class="sidebar-item" onclick="dashboard_class.NavigationListener('_navigation.spotternetwork')">
                <i class="fas fa-globe"></i>
                <span>Spotter Network</span>
            </div>
            <div class="sidebar-item" onclick="dashboard_class.NavigationListener('_navigation.external')">
                <i class="fas fa-satellite-dish"></i>
                <span>Services</span>
            </div>
            <div class="sidebar-item" onclick="dashboard_class.NavigationListener('_navigation.help')">
                <i class="fa fa-hands-helping"></i>
                <span>General Support</span>
            </div>
            <div class="sidebar-item" onclick="dashboard_class.TriggerWidgetListener()">
                <i class="fas fa-cogs"></i>
                <span>Widget Settings</span>
            </div>
            <div class="sidebar-item" onclick="dashboard_class.TriggerAccountListener()">
                <i class="fas fa-user"></i>
                <span>My Account</span>
            </div>
            <div class="sidebar-item" onclick="window.open('https://ko-fi.com/k3yomi', '_blank', 'width=1000,height=1000');">
                <i class="fas fa-donate"></i>
                <span>Support Me</span>
            </div>
            <div class="sidebar-item" onclick="window.open('https://github.com/k3yomi/atmosphericx', '_blank', 'width=1000,height=1000');">
                <i class="fas fa-external-link-square-alt"></i>
                <span>Github</span>
            </div>
            <div class="sidebar-item" onclick="window.open('https://k3yomi.github.io/blog/posts/atmosphericx/', '_blank', 'width=1000,height=1000');">
                <i class="fas fa-external-link-square-alt"></i>
                <span>Documentation</span>
            </div>
            <footer class="sidebar-footer">
                <p>Project AtmosphericX <small>v7.0.0 (Beta)</small><br><small>Created with ‚ù§Ô∏è by k3yomi (KiyoWx)</small></p>
            </footer>
        </div>
        <div class="wrapper">
            <div id="_navigation.home" style="display: block;" type="menu">
                <h1 class="title-dashboard">Dashboard Home</h1>
                <div class="grid-area" style="grid-template-columns: repeat(1, 1fr);">
                    <div class="data-card"> 
                        <h1 class="data-card-title">üëã Welcome, <span id="_home.accountname">[Account Name]</span></h1>
                        <hr class="data-card-hr"> 
                        <p class="data-card-description">
                            Project AtmosphericX is a web-based platform and widget manager tailored for amateur weather enthusiasts, storm chasers, and anyone passionate about understanding and tracking severe weather events. It provides near real-time alerts and updates, ensuring users stay informed about critical weather conditions as they unfold.
                        </p>
                    </div>
                </div>
                <div class="grid-area" style="grid-template-columns: repeat(1, 1fr);">
                    <div class="data-card-parent"> 
                        <h1 class="data-card-title">Hosting Resources & Statistics</h1>
                        <hr class="data-card-hr"> 
                        <div id="child_atmosx_home.hosting_stats" class="grid-area" style="grid-template-columns: repeat(4, 1fr);"></div>
                    </div>
                </div>
            </div>
            <div id="_navigation.alerts" style="display: none;" type="menu">
                <h1 class="title-dashboard">Active Alerts</h1>
                <div class="grid-area" style="grid-template-columns: repeat(1, 1fr);">
                    <div class="data-card-parent"> 
                        <h1 class="data-card-title">Top 6 Most Recent Alerts</span></h1>
                        <hr class="data-card-hr"> 
                        <div id="child_atmosx_alerts.recent_alerts" class="grid-area" style="grid-template-columns: repeat(3, 1fr);"></div>
                    </div>
                    <div class="data-card-parent"> 
                        <h1 class="data-card-title">Search Alerts</span></h1>
                        <hr class="data-card-hr"> 
                        <input class="popup-input" id="_alerts.alert_search" style="width: 50%; margin-top: 5px;" placeholder="Search for alerts, locations, and or any tag indicator" onkeyup="dashboard_class._SpawnAlertsIndex(undefined, undefined, document.getElementById('_alerts.alert_search').value)"><br><br>
                        <div id="child_atmosx_alerts.global_alerts" class="grid-area" style="grid-template-columns: repeat(2, 1fr);"></div>                   
                    </div>
                   
                </div>
            </div>
            <div id="_navigation.lsr" style="display: none;" type="menu">
                <h1 class="title-dashboard">Local Storm Reports</h1>
                <div class="grid-area" style="grid-template-columns: repeat(1, 1fr);">
                    <div class="data-card-parent"> 
                        <h1 class="data-card-title">Storm Report Index (64 Max)</span></h1>
                        <hr class="data-card-hr"> 
                        <small>Search for Local Storm Reports</small><br>
                        <input class="popup-input" id="_lsr.reports_search" style="width: 50%; margin-top: 5px;" placeholder="" onkeyup="dashboard_class._SpawnStormReports(undefined, undefined, document.getElementById('_lsr.reports_search').value)"><br><br>
                        <div id="child_atmosx_lsr.reports" class="grid-area" style="grid-template-columns: repeat(3, 1fr)"></div>
                    </div>
                </div>
            </div>
            <div id="_navigation.lightning" style="display: none;" type="menu">
                <h1 class="title-dashboard">Lightning Reports</h1>
                <div class="grid-area" style="grid-template-columns: repeat(1, 1fr);">
                    <div class="data-card-parent"> 
                        <h1 class="data-card-title">Lightning Reports Index</span></h1>
                        <hr class="data-card-hr">   
                        <div id="child_atmosx_lightning.reports" class="grid-area" style="grid-template-columns: repeat(3, 1fr);"></div>
                    </div>
                </div>
            </div>
            <div id="_navigation.dicussions" style="display: none;" type="menu">
                <h1 class="title-dashboard">Discussions</h1>
                <div class="grid-area" style="grid-template-columns: repeat(1, 1fr);">
                    <div class="data-card-parent"> 
                        <h1 class="data-card-title">Mesoscale Discussions</span></h1>
                        <hr class="data-card-hr"> 
                        <div id="child_atmosx_discussions.mesoscale" class="grid-area" style="grid-template-columns: repeat(1, 1fr);"></div>
                    </div>
                </div>
            </div>
            <div id="_navigation.spc" style="display: none;" type="menu">
                <h1 class="title-dashboard">SPC Models</h1>
                <div class="grid-area" style="grid-template-columns: repeat(1, 1fr);">
                    <div class="data-card-parent"> 
                        <h1 class="data-card-title">Storm Prediction Center Models</span></h1>
                        <hr class="data-card-hr"> 
                        <div id="hub_spc.models" class="grid-area" style="grid-template-columns: repeat(3, 1fr);"></div>
                    </div>
                </div>
            </div>
            <div id="_navigation.mapbox" style="display: none;" type="menu">
                <h1 class="title-dashboard">Mapbox Widget</h1>
                <div class="grid-area" style="grid-template-columns: repeat(1, 1fr);">
                    <div class="data-card-parent"> 
                        <h1 class="data-card-title">Mapbox</span></h1>
                        <hr class="data-card-hr"> 
                        <iframe src="/widgets/mapbox" style="border: none; width: 100%; height: 800px; background-color: grey;" sandbox="allow-same-origin allow-scripts allow-forms allow-popups" scrolling="no"></iframe>
                        <small>If the widget does not load, please make sure you have a valid Mapbox API key.</small><br><br>
                    </div>
                </div>
            </div>
            <div id="_navigation.forecasting" style="display: none;" type="menu">
                <h1 class="title-dashboard">Forecasting</h1>
                <div class="grid-area" style="grid-template-columns: repeat(1, 1fr);">
                    <div class="data-card-parent"> 
                        <h1 class="data-card-title">This feature is currently under development</span></h1>
                        <hr class="data-card-hr"> 
                    </div>
                </div>
            </div>
            <div id="_navigation.radio" style="display: none;" type="menu">
                <h1 class="title-dashboard">NOAA Live Radio</h1>
                <div class="grid-area" style="grid-template-columns: repeat(1, 1fr);">
                    <div class="data-card-parent"> 
                        <h1 class="data-card-title">This feature is currently under development</span></h1>
                        <hr class="data-card-hr"> 
                    </div>
                </div>
            </div>
            <div id="_navigation.spotternetwork" style="display: none;" type="menu">
                <h1 class="title-dashboard">Spotter Network</h1>
                <div class="grid-area" style="grid-template-columns: repeat(1, 1fr);">
                    <div class="data-card-parent"> 
                        <h1 class="data-card-title">Spotter Network</span></h1>
                        <hr class="data-card-hr"> 
                        <small>Search for Spotters</small><br>
                        <input class="popup-input" id="_spotternetwork.spotter_search" style="width: 50%; margin-top: 5px;" placeholder="Search Spotters" oninput="dashboard_class._SpawnSpotterNetwork(undefined, undefined, this.value)"><br><br>

                        <div id="child_atmosx_spotternetwork.general" class="grid-area" style="grid-template-columns: repeat(3, 1fr);"></div>
                    </div>
                </div>
            </div>
            <div id="_navigation.external" style="display: none;" type="menu">
                <h1 class="title-dashboard">External Services</h1>
                <div class="grid-area" style="grid-template-columns: repeat(1, 1fr);">
                    <div class="data-card-parent"> 
                        <h1 class="data-card-title">External Third-Party Services</span></h1>
                        <hr class="data-card-hr"> 
                        <div id="hub_external.services" class="grid-area" style="grid-template-columns: repeat(3, 1fr);"></div>
                    </div>
                </div>
            </div>
            <div id="_navigation.nwws" style="display: none;" type="menu">
                <h1 class="title-dashboard">NWWS-OI</h1>
                <div class="grid-area" style="grid-template-columns: repeat(1, 1fr);">
                    <div class="data-card-parent"> 
                        <h1 class="data-card-title">Latest NWWS Reports</span></h1>
                        <hr class="data-card-hr"> 
                        <div id="child_atmosx_nwws.reports" class="grid-area" style="grid-template-columns: repeat(1, 1fr);"></div>
                    </div>
                </div>
            </div>
            <div id="_navigation.help" style="display: none;" type="menu">
                <h1 class="title-dashboard">General Help Center</h1>
                <div class="grid-area" style="grid-template-columns: repeat(1, 1fr);">
                    <div class="data-card-parent"> 
                        <h1 class="data-card-title">Optional Plugins</span></h1>
                        <hr class="data-card-hr"> 
                        <div id="hub.plugins" class="grid-area" style="grid-template-columns: repeat(3, 1fr);"></div>
                        <div id="hub.support" class="grid-area" style="grid-template-columns: repeat(3, 1fr);"></div>
                    </div>
                </div>
            </div>
        </div>
    </body>
    <script>
        let dashboard_class;
        let alert_class;
        let library = new Library()
        library.CreateSession().then(async () => {
            alert_class = new Alerts(library, true)
            dashboard_class = new Dashboard(library, false)
            await alert_class.SyncAlerts()
            await dashboard_class.UpdateThread()
            await dashboard_class._SpawnGeneralSetupHub()
            await dashboard_class._SpawnExternalLinks()
            await dashboard_class._SpawnStormPredictionCenterModels()
            document.addEventListener('onCacheUpdate', async (event) => {
                await alert_class.SyncAlerts()
                await dashboard_class.UpdateThread()
            })
        })
    </script>
</html>